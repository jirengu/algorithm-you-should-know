
<!DOCTYPE HTML>
<html lang="zh-cn" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>KMP算法 · algorithm you should know</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-vuejs-2/vue.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../查找算法/README.md" />
    
    
    <link rel="prev" href="dfs.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="輸入並搜尋" />
</div>

            
                <nav role="navigation">
                



<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../sort-algorithm/">
            
                <a href="../sort-algorithm/">
            
                    
                    排序算法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../sort-algorithm/bubble-sort.html">
            
                <a href="../sort-algorithm/bubble-sort.html">
            
                    
                    冒泡排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../sort-algorithm/section-sort.html">
            
                <a href="../sort-algorithm/section-sort.html">
            
                    
                    选择排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../sort-algorithm/insertion-sort.html">
            
                <a href="../sort-algorithm/insertion-sort.html">
            
                    
                    插入排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../sort-algorithm/shell-sort.html">
            
                <a href="../sort-algorithm/shell-sort.html">
            
                    
                    希尔排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../sort-algorithm/merge-sort.html">
            
                <a href="../sort-algorithm/merge-sort.html">
            
                    
                    归并排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../sort-algorithm/quick-sort.html">
            
                <a href="../sort-algorithm/quick-sort.html">
            
                    
                    快速排序
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="README.md">
            
                <span>
            
                    
                    搜索算法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="linear-search.html">
            
                <a href="linear-search.html">
            
                    
                    线性搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="binary-search.html">
            
                <a href="binary-search.html">
            
                    
                    二分搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="bfs.html">
            
                <a href="bfs.html">
            
                    
                    广度优先搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="dfs.html">
            
                <a href="dfs.html">
            
                    
                    深度优先搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.5" data-path="kmp.html">
            
                <a href="kmp.html">
            
                    
                    KMP算法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../查找算法/README.md">
            
                <span>
            
                    
                    动态规划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../查找算法/README.md">
            
                <span>
            
                    
                    贪心算法
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>



                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                

                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >KMP算法</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="kmp-&#x7B97;&#x6CD5;">KMP &#x7B97;&#x6CD5;</h1>
<p>&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x4E2D;&#xFF0C;Knuth-Morris-Pratt&#x5B57;&#x7B26;&#x4E32;&#x67E5;&#x627E;&#x7B97;&#x6CD5;&#xFF08;&#x7B80;&#x79F0;&#x4E3A;KMP&#x7B97;&#x6CD5;&#xFF09;&#x53EF;&#x5728;&#x4E00;&#x4E2A;&#x4E3B;&#x6587;&#x672C;&#x5B57;&#x7B26;&#x4E32;S&#x5185;&#x67E5;&#x627E;&#x4E00;&#x4E2A;&#x8BCD;P&#x7684;&#x51FA;&#x73B0;&#x4F4D;&#x7F6E;&#x3002;</p>
<h2 id="&#x4F20;&#x7EDF;&#x7684;&#x5339;&#x914D;&#x7B97;&#x6CD5;">&#x4F20;&#x7EDF;&#x7684;&#x5339;&#x914D;&#x7B97;&#x6CD5;</h2>
<p>&#x5BF9;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&quot;abcdabcabcd abcdabdd&quot;&#xFF0C;&#x4ECE;&#x4E2D;&#x67E5;&#x627E;&#x5339;&#x914D;&#x4E32;&quot;abcdabd&quot;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6700;&#x4F20;&#x7EDF;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x66B4;&#x529B;&#x641C;&#x7D22;&#x6CD5;</p>
<table>
<thead>
<tr>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th><i style="color:red">c</i></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>a</td>
<td>b</td>
<td><i style="color:red">d</i></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>a</th>
<th><i style="color:red">b</i></th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><i style="color:red">a</i></td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>a</td>
<td>b</td>
<td>d</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>a</th>
<th>b</th>
<th><i style="color:red">c</i></th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td><i style="color:red">a</i></td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>a</td>
<td>b</td>
<td>d</td>
</tr>
</tbody>
</table>
<p>......</p>
<table>
<thead>
<tr>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th><i style="color:red">a</i></th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td>a</td>
<td>b</td>
<td>c</td>
<td><i style="color:red">d</i></td>
<td>a</td>
<td>b</td>
<td>d</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th><i style="color:red">b</i></th>
<th>c</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><i style="color:red">a</i></td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>a</td>
<td>b</td>
<td>d</td>
</tr>
</tbody>
</table>
<p>......</p>
<table>
<thead>
<tr>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th></th>
<th>a</th>
<th>b</th>
<th>c</th>
<th>d</th>
<th>a</th>
<th>b</th>
<th>d</th>
<th>d</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>a</td>
<td>b</td>
<td>d</td>
</tr>
</tbody>
</table>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">str, pattern</span>) </span>{
  <span class="hljs-keyword">let</span> i = j = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span>(i &lt; str.length) {
    <span class="hljs-keyword">if</span>(str[i+j] !== pattern[j]) {
      j = <span class="hljs-number">0</span>
      i++
    }<span class="hljs-keyword">else</span> {
      j++
    }
    <span class="hljs-keyword">if</span>(j === pattern.length) {
      <span class="hljs-keyword">return</span> i
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
}
</code></pre>
<p>&#x66B4;&#x529B;&#x5339;&#x914D;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(nm)&#xFF0C;&#x5176;&#x4E2D; n &#x4E3A; str &#x7684;&#x957F;&#x5EA6;&#xFF0C;m &#x4E3A; pattern &#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#x3002;</p>
<h2 id="kmp-&#x7B97;&#x6CD5;">KMP &#x7B97;&#x6CD5;</h2>
<p><img src="https://cloud.hunger-valley.com/18-10-25/91516316.jpg" alt=""></p>
<p>&#x9996;&#x5148;&#xFF0C;&#x4E3B;&#x4E32;&quot;BBC ABCDAB ABCDABCDABDE&quot;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E0E;&#x6A21;&#x5F0F;&#x4E32;&quot;ABCDABD&quot;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x56E0;&#x4E3A;B&#x4E0E;A&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x6240;&#x4EE5;&#x6A21;&#x5F0F;&#x4E32;&#x540E;&#x79FB;&#x4E00;&#x4F4D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/99689436.jpg" alt=""></p>
<p>&#x56E0;&#x4E3A;B&#x4E0E;A&#x53C8;&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x6A21;&#x5F0F;&#x4E32;&#x518D;&#x5F80;&#x540E;&#x79FB;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/55630598.jpg" alt=""></p>
<p>&#x5C31;&#x8FD9;&#x6837;&#xFF0C;&#x76F4;&#x5230;&#x4E3B;&#x4E32;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x4E0E;&#x6A21;&#x5F0F;&#x4E32;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x76F8;&#x540C;&#x4E3A;&#x6B62;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/69578060.jpg" alt=""></p>
<p>&#x63A5;&#x7740;&#x6BD4;&#x8F83;&#x4E3B;&#x4E32;&#x548C;&#x6A21;&#x5F0F;&#x4E32;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x8FD8;&#x662F;&#x76F8;&#x540C;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/52479100.jpg" alt=""></p>
<p>&#x76F4;&#x5230;&#x4E3B;&#x4E32;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x4E0E;&#x6A21;&#x5F0F;&#x4E32;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x7B26;&#x4E0D;&#x76F8;&#x540C;&#x4E3A;&#x6B62;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/68523717.jpg" alt=""></p>
<p>&#x8FD9;&#x65F6;&#xFF0C;&#x6700;&#x81EA;&#x7136;&#x7684;&#x53CD;&#x5E94;&#x662F;&#xFF0C;&#x5C06;&#x6A21;&#x5F0F;&#x4E32;&#x6574;&#x4E2A;&#x540E;&#x79FB;&#x4E00;&#x4F4D;&#xFF0C;&#x518D;&#x4ECE;&#x5934;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x867D;&#x7136;&#x53EF;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x6548;&#x7387;&#x5F88;&#x5DEE;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x8981;&#x628A;&quot;&#x641C;&#x7D22;&#x4F4D;&#x7F6E;&quot;&#x79FB;&#x5230;&#x5DF2;&#x7ECF;&#x6BD4;&#x8F83;&#x8FC7;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x91CD;&#x6BD4;&#x4E00;&#x904D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/50248025.jpg" alt=""></p>
<p>&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x4E8B;&#x5B9E;&#x662F;&#xFF0C;&#x5F53;&#x7A7A;&#x683C;&#x4E0E;D&#x4E0D;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x4F60;&#x5176;&#x5B9E;&#x662F;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x524D;&#x9762;&#x516D;&#x4E2A;&#x5B57;&#x7B26;&#x662F;&quot;ABCDAB&quot;&#x3002;KMP&#x7B97;&#x6CD5;&#x7684;&#x60F3;&#x6CD5;&#x662F;&#xFF0C;&#x8BBE;&#x6CD5;&#x5229;&#x7528;&#x8FD9;&#x4E2A;&#x5DF2;&#x77E5;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x8981;&#x628A;&quot;&#x641C;&#x7D22;&#x4F4D;&#x7F6E;&quot;&#x79FB;&#x56DE;&#x5DF2;&#x7ECF;&#x6BD4;&#x8F83;&#x8FC7;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;&#x662F;&#x7EE7;&#x7EED;&#x628A;&#x5B83;&#x5411;&#x540E;&#x79FB;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x63D0;&#x9AD8;&#x4E86;&#x6548;&#x7387;&#x3002;</p>
<table>
<thead>
<tr>
<th>i</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x6A21;&#x5F0F;&#x4E32;</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>A</td>
<td>B</td>
<td>D</td>
<td>&apos;\0&apos;</td>
</tr>
<tr>
<td>next[i]</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>&#x600E;&#x4E48;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x5462;&#xFF1F;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x6A21;&#x5F0F;&#x4E32;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8DF3;&#x8F6C;&#x6570;&#x7EC4;next&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x662F;&#x600E;&#x4E48;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x518D;&#x4ECB;&#x7ECD;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x8981;&#x77E5;&#x9053;&#x6839;&#x636E;&#x6570;&#x7EC4;&#x91CC;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x8FDB;&#x884C;&#x4F4D;&#x79FB;&#x5C31;&#x884C;&#x3002;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/24343929.jpg" alt=""></p>
<p>&#x5DF2;&#x77E5;&#x7A7A;&#x683C;&#x4E0E;D&#x4E0D;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x524D;&#x9762;&#x516D;&#x4E2A;&#x5B57;&#x7B26;&quot;ABCDAB&quot;&#x662F;&#x5339;&#x914D;&#x7684;&#x3002;&#x6839;&#x636E;&#x8DF3;&#x8F6C;&#x6570;&#x7EC4;&#x53EF;&#x77E5;&#xFF0C;&#x4E0D;&#x5339;&#x914D;&#x5904;D&#x7684;next&#x503C;&#x4E3A;2&#xFF0C;&#x56E0;&#x6B64;&#x63A5;&#x4E0B;&#x6765;&#x4ECE;&#x6A21;&#x5F0F;&#x4E32;&#x4E0B;&#x6807;&#x4E3A;2&#x7684;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5339;&#x914D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/12846522.jpg" alt="">
&#x56E0;&#x4E3A;&#x7A7A;&#x683C;&#x4E0E;&#xFF23;&#x4E0D;&#x5339;&#x914D;&#xFF0C;C&#x5904;&#x7684;next&#x503C;&#x4E3A;0&#xFF0C;&#x56E0;&#x6B64;&#x63A5;&#x4E0B;&#x6765;&#x6A21;&#x5F0F;&#x4E32;&#x4ECE;&#x4E0B;&#x6807;&#x4E3A;0&#x5904;&#x5F00;&#x59CB;&#x5339;&#x914D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/82705596.jpg" alt=""></p>
<p>&#x56E0;&#x4E3A;&#x7A7A;&#x683C;&#x4E0E;A&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x6B64;&#x5904;next&#x503C;&#x4E3A;-1&#xFF0C;&#x8868;&#x793A;&#x6A21;&#x5F0F;&#x4E32;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x5C31;&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x90A3;&#x4E48;&#x76F4;&#x63A5;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4F4D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/50512012.jpg" alt=""></p>
<p>&#x9010;&#x4F4D;&#x6BD4;&#x8F83;&#xFF0C;&#x76F4;&#x5230;&#x53D1;&#x73B0;C&#x4E0E;D&#x4E0D;&#x5339;&#x914D;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x4E0B;&#x4E00;&#x6B65;&#x4ECE;&#x4E0B;&#x6807;&#x4E3A;2&#x7684;&#x5730;&#x65B9;&#x5F00;&#x59CB;&#x5339;&#x914D;&#x3002;</p>
<p><img src="https://cloud.hunger-valley.com/18-10-25/70208774.jpg" alt=""></p>
<p>&#x9010;&#x4F4D;&#x6BD4;&#x8F83;&#xFF0C;&#x76F4;&#x5230;&#x6A21;&#x5F0F;&#x4E32;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#xFF0C;&#x53D1;&#x73B0;&#x5B8C;&#x5168;&#x5339;&#x914D;&#xFF0C;&#x4E8E;&#x662F;&#x641C;&#x7D22;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>function search(str, pattern) {
  let next = getNext(pattern) //&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x80FD;&#x901A;&#x8FC7;getNext&#x751F;&#x6210;next &#x6570;&#x7EC4;&#xFF0C;&#x540E;&#x9762;&#x518D;&#x53BB;&#x5B9E;&#x73B0;&#x5B83;
  let i = j = 0
  while(i &lt; str.length) {
    if(j === -1 || str[i] === pattern[j]) {
      j++
      j++
    }else {
      j = next[j]
    }
    if(j === pattern.length) {
      return i - j
    }
  }
  return -1
}
</code></pre><h2 id="next&#x6570;&#x7EC4;">next&#x6570;&#x7EC4;</h2>
<p>&#x8FD9;&#x91CC;&#x5148;&#x8BB2;&#x4E00;&#x4E0B;&#x5B57;&#x7B26;&#x4E32;&#x7684;&quot;&#x524D;&#x7F00;&quot;&#x548C;&quot;&#x540E;&#x7F00;&quot;&#x3002;&#x5BF9;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&quot;jirenguji&quot;:</p>
<ul>
<li>&#x524D;&#x7F00;&#xFF1A;&quot;j&quot;,&quot;ji&quot;,&quot;jir&quot;,&quot;jire&quot;,&quot;jiren&quot;,&quot;jireng&quot;,&quot;jirengu&quot;,&quot;jirenguj&quot;</li>
<li>&#x540E;&#x7F00;: &quot;i&quot;,&quot;ji&quot;,&quot;uji&quot;,&quot;guji&quot;,&quot;nguji&quot;,&quot;enguji&quot;,&quot;renguji&quot;,&quot;irenguji&quot;</li>
</ul>
<p>&#x5176;&#x4E2D;&#x524D;&#x7F00;&#x4E0D;&#x5305;&#x542B;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x540E;&#x7F00;&#x4E0D;&#x5305;&#x542B;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x3002;&#x5B57;&#x7B26;&#x4E32;&quot;ABCDAB&quot;&#x7684;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x4E3A;&quot;AB&quot;&#x3002;</p>
<p>next&#x6570;&#x7EC4;&#x7684;&#x6C42;&#x89E3;&#x57FA;&#x4E8E;&#x201C;&#x524D;&#x7F00;&#x201D;&#x548C;&#x201C;&#x540E;&#x7F00;&#x201D;&#xFF0C;&#x5373;next[i]&#x7B49;&#x4E8E;&#x5339;&#x914D;&#x4E32;&#x4ECE;&#x7B2C;1&#x5230;&#x7B2C;i-1&#x4E2A;&#x5B57;&#x7B26;&#x6784;&#x6210;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6700;&#x957F;&#x7684;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x7684;&#x957F;&#x5EA6;</p>
<table>
<thead>
<tr>
<th>i</th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
</tr>
</thead>
<tbody>
<tr>
<td>&#x6A21;&#x5F0F;&#x4E32;</td>
<td>A</td>
<td>B</td>
<td>C</td>
<td>D</td>
<td>A</td>
<td>B</td>
<td>D</td>
</tr>
<tr>
<td>next[ i ]</td>
<td>-1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
</tbody>
</table>
<ol>
<li>i = 0&#xFF0C;A&#x524D;&#x9762;&#x6CA1;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F5C;&#x4E3A;&#x6A21;&#x5F0F;&#x4E32;&#x7684;&#x9996;&#x5B57;&#x7B26;&#xFF0C;&#x6211;&#x4EEC;&#x7EDF;&#x4E00;&#x4E3A;next[0] = -1&#xFF1B;</li>
<li>i = 1&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;A&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5373;next[1] = 0&#xFF1B;</li>
<li>i = 2&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;AB&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5373;next[2] = 0&#xFF1B;</li>
<li>i = 3&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;ABC&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5373;next[3] = 0&#xFF1B;</li>
<li>i = 4&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;ABCD&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5373;next[4] = 0&#xFF1B;</li>
<li>i = 5&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;ABCDA&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x957F;A&#xFF0C;&#x5373;next[5] = 1&#xFF1B;</li>
<li>i = 6&#xFF0C;&#x524D;&#x9762;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;ABCDAB&#xFF0C;&#x5176;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x4E3A;AB&#xFF0C;&#x5373;next[6] = 2&#xFF1B;</li>
</ol>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6839;&#x636E;&#x6700;&#x957F;&#x76F8;&#x540C;&#x524D;&#x540E;&#x7F00;&#x7684;&#x957F;&#x5EA6;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5728;&#x4E0D;&#x5339;&#x914D;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x8DF3;&#x8F6C;&#x5462;&#xFF1F;&#x4E3E;&#x4E2A;&#x4EE3;&#x8868;&#x6027;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;&#x5047;&#x5982;i = 6&#x65F6;&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x662F;&#x77E5;&#x9053;&#x5176;&#x4F4D;&#x7F6E;&#x524D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;ABCDAB&#xFF0C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9996;&#x5C3E;&#x90FD;&#x6709;&#x4E00;&#x4E2A;AB&#xFF0C;&#x65E2;&#x7136;&#x5728;i = 6&#x5904;&#x7684;D&#x4E0D;&#x5339;&#x914D;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x4F55;&#x4E0D;&#x76F4;&#x63A5;&#x628A;i = 2&#x5904;&#x7684;C&#x62FF;&#x8FC7;&#x6765;&#x7EE7;&#x7EED;&#x6BD4;&#x8F83;&#x5462;&#xFF0C;&#x56E0;&#x4E3A;&#x90FD;&#x6709;&#x4E00;&#x4E2A;AB&#x554A;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;AB&#x5C31;&#x662F;ABCDAB&#x7684;&#x6700;&#x957F;&#x76F8;&#x540C;&#x771F;&#x524D;&#x540E;&#x7F00;&#xFF0C;&#x5176;&#x957F;&#x5EA6;2&#x6B63;&#x597D;&#x662F;&#x8DF3;&#x8F6C;&#x7684;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x90A3;&#x5982;&#x4F55;&#x5199;getNext&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x6240;&#x9700;&#x8981;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5462;</p>
<pre><code class="lang-javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNext</span>(<span class="hljs-params">pattern</span>) </span>{
  <span class="hljs-keyword">let</span> next = [<span class="hljs-number">-1</span>]
  <span class="hljs-keyword">let</span> j = <span class="hljs-number">-1</span>, i = <span class="hljs-number">0</span> 
  <span class="hljs-keyword">while</span>(i &lt; pattern.length - <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">if</span>(j === <span class="hljs-number">-1</span> || pattern[i] === pattern[j]) {
      i++
      j++
      next[i] = j
    }<span class="hljs-keyword">else</span> {
      j = <span class="hljs-number">-1</span>
    }
  }
}
</code></pre>
<p>&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x6709;&#x4E9B;&#x6666;&#x6DA9;&#x3002;&#x6A21;&#x62DF;&#x4EE3;&#x7801;&#x7684;&#x6267;&#x884C;&#x770B;&#x4E00;&#x4E0B;&#x4E2D;&#x95F4;&#x8FC7;&#x7A0B;&#xFF0C;&#x4F60;&#x5C31;&#x80FD;&#x7406;&#x89E3;</p>
<p>&#x521D;&#x59CB;&#xFF1A;P = &quot;ABCDABD&quot;, j = -1, i = 0, next = [-1, undefined, undefined, undefined, undefined, undefined, undefined]</p>
<p>&#x7B2C;&#x4E00;&#x8F6E;&#xFF1A;&#x56E0;&#x4E3A; j === -1&#xFF0C;&#x6240;&#x4EE5; i++, j++, next[i] = j&#x3002;&#x6B64;&#x65F6; i = 1,  j = 0, next[1] =  0</p>
<p>&#x7B2C;&#x4E8C;&#x8F6E;&#xFF1A;P[i]&#xFF08;&#x5373; P[1]&#xFF09;&#x7684;&#x503C;&#x4E0D;&#x7B49;&#x4E8E; P[j]&#xFF08;&#x5373;P[0])&#xFF0C;&#x6240;&#x4EE5; j = -1</p>
<p>&#x7B2C;&#x4E09;&#x8F6E;&#xFF1A;&#x56E0;&#x4E3A; j === -1&#xFF0C;&#x6240;&#x4EE5; i++, j++, next[i] = j&#x3002;&#x6B64;&#x65F6; i = 2, j = 0, next[2] = 0</p>
<p>&#x7B2C;&#x56DB;&#x8F6E;&#xFF1A;P[i]&#xFF08;&#x5373; P[2]&#xFF09;&#x7684;&#x503C;&#x4E0D;&#x7B49;&#x4E8E; P[j]&#xFF08;&#x5373;P[0])&#xFF0C;&#x6240;&#x4EE5; j = -1</p>
<p>&#x7B2C;&#x4E94;&#x8F6E;&#xFF1A;&#x56E0;&#x4E3A; j === -1&#xFF0C;&#x6240;&#x4EE5; i++, j++, next[i] = j&#x3002;&#x6B64;&#x65F6; i = 3, j = 0, next[3] = 0</p>
<p>&#x7B2C;&#x516D;&#x8F6E;&#xFF1A;P[i]&#xFF08;&#x5373; P[3]&#xFF09;&#x7684;&#x503C;&#x4E0D;&#x7B49;&#x4E8E; P[j]&#xFF08;&#x5373;P[0])&#xFF0C;&#x6240;&#x4EE5; j = -1</p>
<p>&#x7B2C;&#x4E03;&#x8F6E;&#xFF1A;&#x56E0;&#x4E3A; j === -1&#xFF0C;&#x6240;&#x4EE5; i++, j++, next[i] = j&#x3002;&#x6B64;&#x65F6; i = 4, j = 0, next[4] = 0</p>
<p>&#x7B2C;&#x516B;&#x8F6E;&#xFF1A;P[i]&#xFF08;&#x5373; P[4]&#xFF09;&#x7684;&#x503C;&#x7B49;&#x4E8E; P[j]&#xFF08;&#x5373;P[0])&#xFF0C;&#x6240;&#x4EE5; i++, j++,next[i] = j&#x3002;&#x6B64;&#x65F6; i = 5, j = 1, next[5] = 1</p>
<p>&#x7B2C;&#x4E5D;&#x8F6E;&#xFF1A;P[i]&#xFF08;&#x5373; P[5]&#xFF09;&#x7684;&#x503C;&#x7B49;&#x4E8E; P[j]&#xFF08;&#x5373;P[1])&#xFF0C;&#x6240;&#x4EE5; i++, j++,next[i] = j&#x3002;&#x6B64;&#x65F6; i = 6, j = 2, next[6] = 2</p>
<h2 id="&#x5168;&#x90E8;&#x4EE3;&#x7801;">&#x5168;&#x90E8;&#x4EE3;&#x7801;</h2>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">search</span>(<span class="hljs-params">str, pattern</span>) </span>{
  <span class="hljs-keyword">let</span> next = getNext(pattern) 
  <span class="hljs-keyword">let</span> i = j = <span class="hljs-number">0</span>
  <span class="hljs-keyword">while</span>(i &lt; str.length &amp;&amp; j &lt; pattern.length) {
    <span class="hljs-keyword">if</span>(j === <span class="hljs-number">-1</span> || str[i] === pattern[j]) {
      j++
      j++
    }<span class="hljs-keyword">else</span> {
      j = next[j]
    }
  }
  <span class="hljs-keyword">if</span>(j === pattern.length) {
    <span class="hljs-keyword">return</span> i - j
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getNext</span>(<span class="hljs-params">pattern</span>) </span>{
  <span class="hljs-keyword">let</span> next = [<span class="hljs-number">-1</span>]
  <span class="hljs-keyword">let</span> j = <span class="hljs-number">-1</span>, i = <span class="hljs-number">0</span> 
  <span class="hljs-keyword">while</span>(i &lt; pattern.length - <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">if</span>(j === <span class="hljs-number">-1</span> || pattern[i] === pattern[j]) {
      i++
      j++
      next[i] = j
    }<span class="hljs-keyword">else</span> {
      j = <span class="hljs-number">-1</span>
    }
  }
  <span class="hljs-keyword">return</span> next
}
</code></pre>
<h2 id="&#x53C2;&#x8003;">&#x53C2;&#x8003;</h2>
<ul>
<li>&#x672C;&#x6587;&#x56FE;&#x7247;&#x548C;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x62F7;&#x8D1D;&#x81F3;<a href="https://subetter.com/articles/kmp-algorithm.html" target="_blank">&#x5218;&#x6BC5;-KMP&#x7B97;&#x6CD5;</a> </li>
<li><a href="http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html" target="_blank">&#x962E;&#x4E00;&#x5CF0;-KMP&#x7B97;&#x6CD5;</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                

            </div>

            
                
                <a href="dfs.html" class="navigation navigation-prev " aria-label="Previous page: 深度优先搜索">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../查找算法/README.md" class="navigation navigation-next " aria-label="Next page: 动态规划">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"KMP算法","level":"1.3.5","depth":2,"next":{"title":"动态规划","level":"1.4","depth":1,"path":"查找算法/README.md","ref":"查找算法/README.md","articles":[]},"previous":{"title":"深度优先搜索","level":"1.3.4","depth":2,"path":"search-algorithm/dfs.md","ref":"search-algorithm/dfs.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","theme-vuejs-2","-fontsettings","github"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"edit-link":{"label":"Edit This Page","base":"https://github.com/jirengu/algorithm-you-should-know/tree/master/docs"},"github":{"url":"https://github.com/jirengu/algorithm-you-should-know/"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-vuejs-2":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"algorithm you should know","language":"zh-cn","links":{"sharing":{"facebook":false,"twitter":false}},"gitbook":"*"},"file":{"path":"search-algorithm/kmp.md","mtime":"2018-10-25T07:21:52.281Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-10-25T07:47:58.898Z"},"basePath":"..","book":{"language":"zh-cn"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

